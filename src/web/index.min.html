<!doctype html><html><head><meta charset=UTF-8><title>Loading...</title><link rel=icon href=data:,></head><body><script>async function loadWasm(){const e={env:{getString:(e,t)=>(new TextDecoder).decode(new Uint8Array(wasmExports.memory.buffer,e,t)),console_log:(t,n,s,o)=>console.log("%c"+e.env.getString(t,n),e.env.getString(s,o)),console_warn:(t,n,s,o)=>console.warn("%c"+e.env.getString(t,n),e.env.getString(s,o)),console_error:(t,n,s,o)=>console.error("%c"+e.env.getString(t,n),e.env.getString(s,o)),reload_wasm:()=>loadWasm(),threadTask:function(){let e;onmessage=async function(t){if("init"===t.data.type){const n=t.data.module,s=(t.data.threadId,{env:{getString:(t,n)=>(new TextDecoder).decode(new Uint8Array(e.exports.memory.buffer,t,n)),console_log:function(e,t,n,o){const r=s.env.getString(e,t),a=s.env.getString(n,o);console.log("%c"+r,a)},console_warn:function(e,t,n,o){const r=s.env.getString(e,t),a=s.env.getString(n,o);console.warn("%c"+r,a)},console_error:function(e,t,n,o){const r=s.env.getString(e,t),a=s.env.getString(n,o);console.error("%c"+r,a)},setTitle:function(){},createElement:function(){return 0},appendChild:function(){},setAttribute:function(){},addEventListener:function(){},getValue:function(){return 0},setInnerHTML:function(){},setTextContent:function(){},setClassName:function(){},setId:function(){},addStyleSheet:function(){},reload_wasm:function(){},create_thread:function(){return 0},thread_join:function(){}}});e=await WebAssembly.instantiate(n,s)}else if("run"===t.data.type)try{e.exports.invoke_thread_task(t.data.task_id)}catch(e){console.error("Error calling invoke_thread_task:",e)}}},create_thread:t=>{const n=`(${e.env.threadTask.toString()})()`,s=new Worker(URL.createObjectURL(new Blob([n],{type:"application/javascript"}))),o=threads.length;return s.postMessage({type:"init",module:wasmModule,threadId:o}),s.postMessage({type:"run",task_id:t}),threads.push(s),o},thread_join:e=>{threads[e]&&threads[e].terminate()},createElement:(t,n)=>{const s=e.env.getString(t,n),o=document.createElement(s);return elements.push(o),elements.length-1},appendChild:(e,t)=>{elements[e]&&elements[t]&&elements[e].appendChild(elements[t])},setAttribute:(t,n,s,o,r)=>{const a=e.env.getString(n,s),i=e.env.getString(o,r);elements[t]&&elements[t].setAttribute(a,i)},addEventListener:(t,n,s,o)=>{const r=e.env.getString(n,s);elements[t]&&elements[t].addEventListener(r,()=>wasmExports.invoke(o))},getValue:(e,t,n)=>{if(elements[e]&&elements[e].value){const s=elements[e].value,o=(new TextEncoder).encode(s),r=Math.min(o.length,n);return new Uint8Array(wasmExports.memory.buffer).set(o.slice(0,r),t),r}return 0},setInnerHTML:(t,n,s)=>{const o=e.env.getString(n,s);elements[t]&&(elements[t].innerHTML=o)},setTextContent:(t,n,s)=>{const o=e.env.getString(n,s);elements[t]&&(elements[t].textContent=o)},setClassName:(t,n,s)=>{const o=e.env.getString(n,s);elements[t]&&(elements[t].className=o)},setId:(t,n,s)=>{const o=e.env.getString(n,s);elements[t]&&(elements[t].id=o)},setTitle:(t,n)=>{document.title=e.env.getString(t,n)},addStyleSheet:(t,n)=>{const s=e.env.getString(t,n),o=document.createElement("style");o.textContent=s,document.head.appendChild(o)}}},t={builtins:["js-string","text-encoder"]};fetch("./star.wasm").then(e=>e.arrayBuffer()).then(e=>WebAssembly.compile(e,t)).then(t=>(window.wasmModule=t,WebAssembly.instantiate(t,e))).then(e=>{console.log("Loading WebAssembly module..."),window.wasmExports={...e.exports},window.elements=[null,document.body],window.threads=[],wasmExports._start&&(console.log("wasmExports: ",window.wasmExports),wasmExports._start())}).catch(e=>{console.log("Error loading WebAssembly: ",e)})}loadWasm()</script></body></html>